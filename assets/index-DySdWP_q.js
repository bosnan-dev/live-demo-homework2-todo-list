(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const r=document.getElementById("task-list"),E=document.getElementById("new-task-form"),f=document.getElementById("new-task-input"),g=document.getElementById("theme-toggle"),h=document.getElementById("theme-icon");let p=!1,i=b();function m(){localStorage.setItem("tasks",JSON.stringify(i))}function b(){const t=localStorage.getItem("tasks");return t?JSON.parse(t):[]}function k(){document.body.classList.toggle("dark-theme"),p=!p,p?(h.textContent="nightlight_round",document.documentElement.style.setProperty("--toggle-bg-color","#ffc107"),document.documentElement.style.setProperty("--toggle-bg-hover-color","#e0a800"),g.innerHTML='<span class="material-icons" id="theme-icon">nightlight_round</span> Light Theme'):(h.textContent="wb_sunny",document.documentElement.style.setProperty("--toggle-bg-color","#28a745"),document.documentElement.style.setProperty("--toggle-bg-hover-color","#218838"),g.innerHTML='<span class="material-icons" id="theme-icon">wb_sunny</span> Dark Theme')}function C(t){const e={id:Date.now(),content:t,completed:!1};i.push(e),m(),u()}function L(t){i=i.filter(e=>e.id!==t),m(),u()}function v(t){const e=i.find(o=>o.id===t);if(e){const o=prompt("Edit your task:",e.content);o!==null&&o.trim()!==""&&(e.content=o.trim(),m(),u())}}function T(t){const e=i.find(o=>o.id===t);e&&(e.completed=!e.completed,m(),u())}function u(){r.innerHTML=`
        <li>
            <span><b>Status</b></span>
            <span><b>Title</b></span>
            <span><b>Options</b></span>
        </li>
    `,i.forEach(t=>{const e=document.createElement("li");e.className=t.completed?"completed":"",e.draggable=!0,e.dataset.id=t.id.toString(),e.addEventListener("dragstart",c=>{c.target.classList.add("dragging")}),e.addEventListener("dragend",c=>{c.target.classList.remove("dragging")});const o=document.createElement("div");o.className="task-content";const a=document.createElement("button");a.className=`complete-btn ${t.completed?"completed":"incomplete"}`,a.textContent=t.completed?"Incomplete":"Complete",a.onclick=c=>{c.stopPropagation(),T(t.id)};const n=document.createElement("span");n.textContent=t.content,o.appendChild(a),o.appendChild(n);const s=document.createElement("div");s.className="task-options";const l=document.createElement("button");l.className="edit-btn",l.textContent="Edit",l.onclick=c=>{c.stopPropagation(),v(t.id)};const d=document.createElement("button");d.className="delete-btn",d.textContent="Delete",d.onclick=c=>{c.stopPropagation(),L(t.id)},s.appendChild(l),s.appendChild(d),e.appendChild(o),e.appendChild(s),r.appendChild(e)})}r.addEventListener("dragover",t=>{t.preventDefault();const e=document.querySelector(".dragging"),o=y(r,t.clientY);o==null?r.appendChild(e):r.insertBefore(e,o)});r.addEventListener("drop",t=>{t.preventDefault();const e=document.querySelector(".dragging"),o=y(r,t.clientY);o==null?r.appendChild(e):r.insertBefore(e,o),I(),m()});function y(t,e){return[...t.querySelectorAll("li:not(.dragging)")].reduce((n,s)=>{const l=s.getBoundingClientRect(),d=e-l.top;return!n||Math.abs(d)<Math.abs(n.offset)?{element:s,offset:d}:n},{element:null,offset:1/0}).element}function I(){i=[...r.querySelectorAll("li:not(:first-child)")].map(e=>{const o=Number(e.id);return i.find(n=>n.id===o)}),m()}E.addEventListener("submit",t=>{t.preventDefault();const e=f.value.trim();e&&(C(e),f.value="")});g.addEventListener("click",k);u();
